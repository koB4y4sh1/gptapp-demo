# バックエンド

このディレクトリには、AIを活用したプレゼンテーション自動生成アプリケーションのバックエンド実装が含まれています。

## ディレクトリ構造

```
backend/
├── src/                  # ソースコード
│   ├── application/      # アプリケーションサービス
│   ├── domain/           # ドメイン層
│   ├── interfaces/       # インターフェース層
│   ├── routes/           # ルート定義
│   └── utils/            # ユーティリティ
├── logs/                 # ログファイル
├── outputs/              # 生成されたファイルの出力先
├── .env                  # 環境変数
├── requirements.txt      # 依存関係
└── app.py                # アプリケーションエントリーポイント
```

## 主要なコンポーネント

### 1. アプリケーションサービス (`src/application/`)
- スライド生成のユースケースを実装
- APIエンドポイントとの連携
- 主要ファイル:
  - `generate_slide.py`: スライド生成のメインロジック
  - `slide_storage.py`: 生成されたスライドの保存と取得

### 2. ドメイン層 (`src/domain/`)
- アプリケーションのコアビジネスロジック
- LangGraph ワークフローの実装
- スライドモデルとテンプレート
- 主要コンポーネント:
  - `langgraph_workflow/`: LLMを活用したワークフロー定義
  - `model/`: データモデルとスキーマ定義
  - `slides/`: スライドテンプレートと生成ロジック

### 3. インターフェース層 (`src/interfaces/`)
- 外部サービスとの連携
- データベース接続
- 主要ファイル:
  - `client/supabase_client.py`: Supabaseとの連携

### 4. ルート層 (`src/routes/`)
- APIエンドポイント定義
- リクエスト/レスポンスの処理
- 主要エンドポイント:
  - `/generate`: プレゼンテーション生成
  - `/confirm`: 生成結果の確認

### 5. ユーティリティ (`src/utils/`)
- 共通機能の提供
- ロギング設定
- ヘルパー関数

## 環境設定

1. 環境変数の設定
   ```bash
   cp .env.example .env
   # .envファイルを編集して必要な設定を行う
   ```

2. 依存関係のインストール
   ```bash
   pip install -r requirements.txt
   ```

## 実行方法

1. アプリケーションの起動
   ```bash
   python app.py
   ```

2. テスト実行
   ```bash
   python testapp.py
   ```

## 設計方針

1. **クリーンアーキテクチャ**
   - ドメイン層、インターフェース層、アプリケーション層の明確な分離
   - 依存関係の方向を制御（内側のレイヤーは外側のレイヤーに依存しない）
   - テスト容易性の向上

2. **モジュール性**
   - 各コンポーネントは独立して動作可能
   - 明確な責任分担
   - 拡張性の確保

3. **保守性**
   - 一貫したコーディング規約
   - 詳細なドキュメント
   - ログ出力の徹底 